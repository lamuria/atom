Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.enableAutohide = enableAutohide;
exports.disableAutohide = disableAutohide;
exports.isAutohideEnabled = isAutohideEnabled;
exports.toggleAutohide = toggleAutohide;
exports.updateTreeView = updateTreeView;
exports.updateTriggerArea = updateTriggerArea;
exports.showTreeView = showTreeView;
exports.hideTreeView = hideTreeView;
exports.isTreeViewVisible = isTreeViewVisible;
exports.toggleTreeView = toggleTreeView;
exports.resizeTreeView = resizeTreeView;
exports.storeFocusedElement = storeFocusedElement;
exports.clearFocusedElement = clearFocusedElement;
exports.restoreFocus = restoreFocus;
exports.focusTreeView = focusTreeView;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

require('object-assign-shim');

var _atom = require('atom');

var _mainJs = require('./main.js');

var _commandsJs = require('./commands.js');

var _commandsJs2 = _interopRequireDefault(_commandsJs);

var _hoverEventsJs = require('./hover-events.js');

var _clickEventsJs = require('./click-events.js');

var _touchEventsJs = require('./touch-events.js');

var _pinViewJs = require('./pin-view.js');

var _pinViewJs2 = _interopRequireDefault(_pinViewJs);

var _configJs = require('./config.js');

var _configJs2 = _interopRequireDefault(_configJs);

var _utilsJs = require('./utils.js');

'use babel';

function logError(error) {
  atom.notifications.addError('autohide-tree-view: ' + error.message);
  console.error(error); // eslint-disable-line no-console
}

var disposables;

function enableAutohide() {
  if (disposables) return Promise.resolve();
  _mainJs.treeViewEl.setAttribute('data-autohide', '');
  _mainJs.treeViewEl.appendChild(eventTriggerArea);
  _pinViewJs2['default'].deactivate();
  // start with pushEditor = true for a nicer animation
  updateTreeView(true);
  hideTreeView().then(function () {
    updateTreeView();
    handleEvents();
  }, logError);
}

function disableAutohide() {
  if (!disposables) return Promise.resolve();
  disposables.dispose();
  disposables = null;
  // the stylesheet will be removed before the animation is finished
  // which will reset the minWidth to 100px
  _mainJs.treeViewEl.style.minWidth = '0px';
  var isVisible = isTreeViewVisible();
  var panel = atom.views.getView(_mainJs.treeView.panel);
  updateTreeView(_configJs2['default'].pushEditor || !isVisible);
  return (isVisible ? animate(_mainJs.treeViewEl.clientWidth, 0, panel) : showTreeView()).then(function () {
    _mainJs.treeViewEl.removeAttribute('data-autohide');
    Object.assign(_mainJs.treeViewEl.style, { position: '', height: '', minWidth: '' });
    panel.style.width = '';
  }, logError);
}

function isAutohideEnabled() {
  return !!disposables;
}

function toggleAutohide() {
  return !!disposables ? disableAutohide() : enableAutohide();
}

function handleEvents() {
  disposables = new _atom.CompositeDisposable((0, _commandsJs2['default'])(), (0, _configJs.observeConfig)(), (0, _utilsJs.domListener)(_mainJs.treeViewEl, 'click', function (event) {
    if (event.button == 0) resizeTreeView();
  }, { delegationTarget: '.entry.directory' }), (0, _utilsJs.domListener)(_mainJs.treeViewEl, 'click', function (event) {
    if (event.button == 0) var disposable = atom.workspace.onDidChangeActivePaneItem(function (paneItem) {
      storeFocusedElement(atom.views.getView(paneItem));
      disposable.dispose();
    });
  }, { useCapture: true, delegationTarget: '.entry.file' }), (0, _utilsJs.domListener)(document.body, 'focus', function () {
    if (isTreeViewVisible()) hideTreeView();
  }, { delegationTarget: 'atom-text-editor' }), new _atom.Disposable(function () {
    (0, _hoverEventsJs.disableHoverEvents)();
    (0, _clickEventsJs.disableClickEvents)();
    (0, _touchEventsJs.disableTouchEvents)();
    _pinViewJs2['default'].activate();
  }));
}

function updateTreeView() {
  var pushEditor = arguments.length <= 0 || arguments[0] === undefined ? _configJs2['default'].pushEditor : arguments[0];

  var panel = atom.views.getView(_mainJs.treeView.panel);
  _mainJs.treeViewEl.style.position = pushEditor ? '' : 'absolute';
  panel.style.width = pushEditor ? '' : _configJs2['default'].minWidth + 'px';
}

// area on which hover and click events trigger
var eventTriggerArea = document.createElement('div');
exports.eventTriggerArea = eventTriggerArea;
eventTriggerArea.classList.add('tree-view-autohide-trigger-area');

function updateTriggerArea() {
  var triggerWidth = Math.max(1, _configJs2['default'].minWidth, _configJs2['default'].triggerAreaSize);
  eventTriggerArea.style.minWidth = triggerWidth + 'px';
}

var visible = false;

// shows the tree view

function showTreeView() {
  var delay = arguments.length <= 0 || arguments[0] === undefined ? 0 : arguments[0];
  var shouldDisableHoverEvents = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];

  visible = true;
  // disable hover events on the tree view when this
  // show is not triggered by a hover event
  if (shouldDisableHoverEvents && (0, _hoverEventsJs.isHoverEventsEnabled)()) disposables.add((0, _hoverEventsJs.disableHoverEventsUntilBlur)());
  // keep a reference to the currently focused element
  // so we can restore focus when the tree view will hide
  storeFocusedElement();
  return animate((0, _utilsJs.getContentWidth)(), delay).then(function (hasFinished) {
    // make sure the hover area doesn't block tree items
    eventTriggerArea.style.pointerEvents = 'none';
    // focus the tree view if the animation finished
    if (hasFinished) focusTreeView();
    return hasFinished;
  });
}

// hides the tree view

function hideTreeView() {
  var delay = arguments.length <= 0 || arguments[0] === undefined ? 0 : arguments[0];

  visible = false;
  eventTriggerArea.style.pointerEvents = '';
  return animate(_configJs2['default'].minWidth, delay).then(function (hasFinished) {
    if (hasFinished) {
      // focus the element that had focus when show() was triggered
      restoreFocus();
      // again because sometimes a show() ends after a hide() starts
      eventTriggerArea.style.pointerEvents = '';
    }
    return hasFinished;
  });
}

function isTreeViewVisible() {
  return visible;
}

// toggles the tree view

function toggleTreeView() {
  var delay = arguments.length <= 0 || arguments[0] === undefined ? 0 : arguments[0];

  return visible ? hideTreeView(delay) : showTreeView(delay);
}

// resizes the tree view to fit the content

function resizeTreeView() {
  return visible ? showTreeView(0, false) : hideTreeView();
}

var currentAnimation = null;

// the animation function returns a promise that resolves with 'true'
// if the animation finished, or with 'false' if it was cancelled
function animate(targetWidth, delay) {
  var element = arguments.length <= 2 || arguments[2] === undefined ? _mainJs.treeViewEl : arguments[2];

  var initialWidth = element.clientWidth;
  // duration = 0 if animationSpeed == 0
  var animationSpeed = _configJs2['default'].animationSpeed || Infinity;
  var duration = Math.abs(targetWidth - initialWidth) / animationSpeed;
  // cancel any current animation and
  // immediately trigger this animation
  if (currentAnimation && currentAnimation.playState != 'finished') {
    currentAnimation.cancel();
    delay = 0;
  }

  return new Promise(function (resolve) {
    // cache the current animationPlayer so we can
    // cancel it as soon as another animation begins
    var animation = currentAnimation = element.animate([{ width: initialWidth }, { width: targetWidth }], { duration: duration, delay: delay });

    animation.addEventListener('finish', function onfinish() {
      animation.removeEventListener('finish', onfinish);
      // if cancelled, resolve with false
      if (animation.playState != 'finished') return resolve(false);

      // prevent tree view from resetting its width to initialWidth
      element.style.width = targetWidth + 'px';
      currentAnimation = null;
      resolve(true);
    });
  })['catch'](logError);
}

// functions that deal with focusing the right
// element at the right time

var focusedElement;

// cache the element that currently has focus

function storeFocusedElement() {
  var el = arguments.length <= 0 || arguments[0] === undefined ? document.activeElement : arguments[0];

  if (!(0, _utilsJs.isChildOf)(el, _mainJs.treeViewEl.parentNode)) focusedElement = el;
}

// clear the reference to the focusedElement. useful
// when we want to invalidate the next restoreFocus

function clearFocusedElement() {
  focusedElement = null;
}

// restores focus on focusedElement

function restoreFocus() {
  // only restore focus if tree view has focus
  if (!focusedElement || !(0, _utilsJs.isChildOf)(document.activeElement, _mainJs.treeViewEl)) return;
  if (typeof focusedElement.focus == 'function') focusedElement.focus();
  clearFocusedElement();
}

// focus the tree view with some logic around it to cancel

function focusTreeView() {
  // don't focus if a modal panel has focus
  // because they tend to close when they lose focus
  if ((0, _utilsJs.isChildOf)(document.activeElement, 'atom-panel.modal')) return;

  _mainJs.treeView.focus();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXJjb3NsYW11cmlhLy5hdG9tL3BhY2thZ2VzL2F1dG9oaWRlLXRyZWUtdmlldy9saWIvYXV0b2hpZGUtdHJlZS12aWV3LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztRQUNPLG9CQUFvQjs7b0JBQ21CLE1BQU07O3NCQUNqQixXQUFXOzswQkFDckIsZUFBZTs7Ozs2QkFFSixtQkFBbUI7OzZCQUN0QixtQkFBbUI7OzZCQUNuQixtQkFBbUI7O3lCQUNoQyxlQUFlOzs7O3dCQUNDLGFBQWE7Ozs7dUJBQ0ssWUFBWTs7QUFYbEUsV0FBVyxDQUFDOztBQWFaLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRTtBQUN2QixNQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsMEJBQXdCLEtBQUssQ0FBQyxPQUFPLENBQUcsQ0FBQztBQUNwRSxTQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0NBQ3RCOztBQUVELElBQUksV0FBVyxDQUFDOztBQUVULFNBQVMsY0FBYyxHQUFHO0FBQy9CLE1BQUcsV0FBVyxFQUFFLE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ3pDLHFCQUFXLFlBQVksQ0FBQyxlQUFlLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDN0MscUJBQVcsV0FBVyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDekMseUJBQVEsVUFBVSxFQUFFLENBQUM7O0FBRXJCLGdCQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDckIsY0FBWSxFQUFFLENBQUMsSUFBSSxDQUFDLFlBQU07QUFDeEIsa0JBQWMsRUFBRSxDQUFDO0FBQ2pCLGdCQUFZLEVBQUUsQ0FBQztHQUNoQixFQUFFLFFBQVEsQ0FBQyxDQUFDO0NBQ2Q7O0FBRU0sU0FBUyxlQUFlLEdBQUc7QUFDaEMsTUFBRyxDQUFDLFdBQVcsRUFBRSxPQUFPLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUMxQyxhQUFXLENBQUMsT0FBTyxFQUFF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QVEsQ0FBQyxhQUFhLEVBQUUsa0JBQWtCLENBQUMsRUFDdEQsT0FBTzs7QUFFVCxtQkFBUyxLQUFLLEVBQUUsQ0FBQztDQUNsQiIsImZpbGUiOiIvVXNlcnMvbWFyY29zbGFtdXJpYS8uYXRvbS9wYWNrYWdlcy9hdXRvaGlkZS10cmVlLXZpZXcvbGliL2F1dG9oaWRlLXRyZWUtdmlldy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnO1xuaW1wb3J0ICdvYmplY3QtYXNzaWduLXNoaW0nO1xuaW1wb3J0IHtDb21wb3NpdGVEaXNwb3NhYmxlLCBEaXNwb3NhYmxlfSBmcm9tICdhdG9tJztcbmltcG9ydCB7dHJlZVZpZXcsIHRyZWVWaWV3RWx9IGZyb20gJy4vbWFpbi5qcyc7XG5pbXBvcnQgaW5pdENvbW1hbmRzIGZyb20gJy4vY29tbWFuZHMuanMnO1xuaW1wb3J0IHtkaXNhYmxlSG92ZXJFdmVudHMsIGlzSG92ZXJFdmVudHNFbmFibGVkLFxuICBkaXNhYmxlSG92ZXJFdmVudHNVbnRpbEJsdXJ9IGZyb20gJy4vaG92ZXItZXZlbnRzLmpzJztcbmltcG9ydCB7ZGlzYWJsZUNsaWNrRXZlbnRzfSBmcm9tICcuL2NsaWNrLWV2ZW50cy5qcyc7XG5pbXBvcnQge2Rpc2FibGVUb3VjaEV2ZW50c30gZnJvbSAnLi90b3VjaC1ldmVudHMuanMnO1xuaW1wb3J0IHBpblZpZXcgZnJvbSAnLi9waW4tdmlldy5qcyc7XG5pbXBvcnQgY29uZmlnLCB7b2JzZXJ2ZUNvbmZpZ30gZnJvbSAnLi9jb25maWcuanMnO1xuaW1wb3J0IHtnZXRDb250ZW50V2lkdGgsIGlzQ2hpbGRPZiwgZG9tTGlzdGVuZXJ9IGZyb20gJy4vdXRpbHMuanMnO1xuXG5mdW5jdGlvbiBsb2dFcnJvcihlcnJvcikge1xuICBhdG9tLm5vdGlmaWNhdGlvbnMuYWRkRXJyb3IoYGF1dG9oaWRlLXRyZWUtdmlldzogJHtlcnJvci5tZXNzYWdlfWApO1xuICBjb25zb2xlLmVycm9yKGVycm9yKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG59XG5cbnZhciBkaXNwb3NhYmxlcztcblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZUF1dG9oaWRlKCkge1xuICBpZihkaXNwb3NhYmxlcykgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB0cmVlVmlld0VsLnNldEF0dHJpYnV0ZSgnZGF0YS1hdXRvaGlkZScsICcnKTtcbiAgdHJlZVZpZXdFbC5hcHBlbmRDaGlsZChldmVudFRyaWdnZXJBcmVhKTtcbiAgcGluVmlldy5kZWFjdGl2YXRlKCk7XG4gIC8vIHN0YXJ0IHdpdGggcHVzaEVkaXRvciA9IHRydWUgZm9yIGEgbmljZXIgYW5pbWF0aW9uXG4gIHVwZGF0ZVRyZWVWaWV3KHRydWUpO1xuICBoaWRlVHJlZVZpZXcoKS50aGVuKCgpID0+IHtcbiAgICB1cGRhdGVUcmVlVmlldygpO1xuICAgIGhhbmRsZUV2ZW50cygpO1xuICB9LCBsb2dFcnJvcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlQXV0b2hpZGUoKSB7XG4gIGlmKCFkaXNwb3NhYmxlcykgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICBkaXNwb3NhYmxlcy5kaXNwb3NlKCk7XG4gIGRpc3Bvc2FibGVzID0gbnVsbDtcbiAgLy8gdGhlIHN0eWxlc2hlZXQgd2lsbCBiZSByZW1vdmVkIGJlZm9yZSB0aGUgYW5pbWF0aW9uIGlzIGZpbmlzaGVkXG4gIC8vIHdoaWNoIHdpbGwgcmVzZXQgdGhlIG1pbldpZHRoIHRvIDEwMHB4XG4gIHRyZWVWaWV3RWwuc3R5bGUubWluV2lkdGggPSAnMHB4JztcbiAgdmFyIGlzVmlzaWJsZSA9IGlzVHJlZVZpZXdWaXNpYmxlKCk7XG4gIHZhciBwYW5lbCA9IGF0b20udmlld3MuZ2V0Vmlldyh0cmVlVmlldy5wYW5lbCk7XG4gIHVwZGF0ZVRyZWVWaWV3KGNvbmZpZy5wdXNoRWRpdG9yIHx8ICFpc1Zpc2libGUpO1xuICByZXR1cm4gKGlzVmlzaWJsZSA/IGFuaW1hdGUodHJlZVZpZXdFbC5jbGllbnRXaWR0aCwgMCwgcGFuZWwpIDogc2hvd1RyZWVWaWV3KCkpLnRoZW4oKCkgPT4ge1xuICAgIHRyZWVWaWV3RWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWF1dG9oaWRlJyk7XG4gICAgT2JqZWN0LmFzc2lnbih0cmVlVmlld0VsLnN0eWxlLCB7cG9zaXRpb246ICcnLCBoZWlnaHQ6ICcnLCBtaW5XaWR0aDogJyd9KTtcbiAgICBwYW5lbC5zdHlsZS53aWR0aCA9ICcnO1xuICB9LCBsb2dFcnJvcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dG9oaWRlRW5hYmxlZCgpIHtcbiAgcmV0dXJuICEhZGlzcG9zYWJsZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVBdXRvaGlkZSgpIHtcbiAgcmV0dXJuICEhZGlzcG9zYWJsZXMgPyBkaXNhYmxlQXV0b2hpZGUoKSA6IGVuYWJsZUF1dG9oaWRlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUV2ZW50cygpIHtcbiAgZGlzcG9zYWJsZXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZShcbiAgICBpbml0Q29tbWFuZHMoKSxcbiAgICBvYnNlcnZlQ29uZmlnKCksXG5cbiAgICBkb21MaXN0ZW5lcih0cmVlVmlld0VsLCAnY2xpY2snLCBldmVudCA9PiB7XG4gICAgICBpZihldmVudC5idXR0b24gPT0gMCkgcmVzaXplVHJlZVZpZXcoKTtcbiAgICB9LCB7ZGVsZWdhdGlvblRhcmdldDogJy5lbnRyeS5kaXJlY3RvcnknfSksXG5cbiAgICBkb21MaXN0ZW5lcih0cmVlVmlld0VsLCAnY2xpY2snLCBldmVudCA9PiB7XG4gICAgICBpZihldmVudC5idXR0b24gPT0gMCkgdmFyIGRpc3Bvc2FibGUgPSBhdG9tLndvcmtzcGFjZS5vbkRpZENoYW5nZUFjdGl2ZVBhbmVJdGVtKHBhbmVJdGVtID0+IHtcbiAgICAgICAgc3RvcmVGb2N1c2VkRWxlbWVudChhdG9tLnZpZXdzLmdldFZpZXcocGFuZUl0ZW0pKTtcbiAgICAgICAgZGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICB9KTtcbiAgICB9LCB7dXNlQ2FwdHVyZTogdHJ1ZSwgZGVsZWdhdGlvblRhcmdldDogJy5lbnRyeS5maWxlJ30pLFxuXG4gICAgZG9tTGlzdGVuZXIoZG9jdW1lbnQuYm9keSwgJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgaWYoaXNUcmVlVmlld1Zpc2libGUoKSkgaGlkZVRyZWVWaWV3KCk7XG4gICAgfSwge2RlbGVnYXRpb25UYXJnZXQ6ICdhdG9tLXRleHQtZWRpdG9yJ30pLFxuXG4gICAgbmV3IERpc3Bvc2FibGUoKCkgPT4ge1xuICAgICAgZGlzYWJsZUhvdmVyRXZlbnRzKCk7XG4gICAgICBkaXNhYmxlQ2xpY2tFdmVudHMoKTtcbiAgICAgIGRpc2FibGVUb3VjaEV2ZW50cygpO1xuICAgICAgcGluVmlldy5hY3RpdmF0ZSgpO1xuICAgIH0pLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVHJlZVZpZXcocHVzaEVkaXRvciA9IGNvbmZpZy5wdXNoRWRpdG9yKSB7XG4gIHZhciBwYW5lbCA9IGF0b20udmlld3MuZ2V0Vmlldyh0cmVlVmlldy5wYW5lbCk7XG4gIHRyZWVWaWV3RWwuc3R5bGUucG9zaXRpb24gPSBwdXNoRWRpdG9yID8gJycgOiAnYWJzb2x1dGUnO1xuICBwYW5lbC5zdHlsZS53aWR0aCA9IHB1c2hFZGl0b3IgPyAnJyA6IGAke2NvbmZpZy5taW5XaWR0aH1weGA7XG59XG5cbi8vIGFyZWEgb24gd2hpY2ggaG92ZXIgYW5kIGNsaWNrIGV2ZW50cyB0cmlnZ2VyXG5leHBvcnQgdmFyIGV2ZW50VHJpZ2dlckFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbmV2ZW50VHJpZ2dlckFyZWEuY2xhc3NMaXN0LmFkZCgndHJlZS12aWV3LWF1dG9oaWRlLXRyaWdnZXItYXJlYScpO1xuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVHJpZ2dlckFyZWEoKSB7XG4gIHZhciB0cmlnZ2VyV2lkdGggPSBNYXRoLm1heCgxLCBjb25maWcubWluV2lkdGgsIGNvbmZpZy50cmlnZ2VyQXJlYVNpemUpO1xuICBldmVudFRyaWdnZXJBcmVhLnN0eWxlLm1pbldpZHRoID0gYCR7dHJpZ2dlcldpZHRofXB4YDtcbn1cblxudmFyIHZpc2libGUgPSBmYWxzZTtcblxuLy8gc2hvd3MgdGhlIHRyZWUgdmlld1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dUcmVlVmlldyhkZWxheSA9IDAsIHNob3VsZERpc2FibGVIb3ZlckV2ZW50cyA9IHRydWUpIHtcbiAgdmlzaWJsZSA9IHRydWU7XG4gIC8vIGRpc2FibGUgaG92ZXIgZXZlbnRzIG9uIHRoZSB0cmVlIHZpZXcgd2hlbiB0aGlzXG4gIC8vIHNob3cgaXMgbm90IHRyaWdnZXJlZCBieSBhIGhvdmVyIGV2ZW50XG4gIGlmKHNob3VsZERpc2FibGVIb3ZlckV2ZW50cyAmJiBpc0hvdmVyRXZlbnRzRW5hYmxlZCgpKVxuICAgIGRpc3Bvc2FibGVzLmFkZChkaXNhYmxlSG92ZXJFdmVudHNVbnRpbEJsdXIoKSk7XG4gIC8vIGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnRseSBmb2N1c2VkIGVsZW1lbnRcbiAgLy8gc28gd2UgY2FuIHJlc3RvcmUgZm9jdXMgd2hlbiB0aGUgdHJlZSB2aWV3IHdpbGwgaGlkZVxuICBzdG9yZUZvY3VzZWRFbGVtZW50KCk7XG4gIHJldHVybiBhbmltYXRlKGdldENvbnRlbnRXaWR0aCgpLCBkZWxheSkudGhlbihoYXNGaW5pc2hlZCA9PiB7XG4gICAgLy8gbWFrZSBzdXJlIHRoZSBob3ZlciBhcmVhIGRvZXNuJ3QgYmxvY2sgdHJlZSBpdGVtc1xuICAgIGV2ZW50VHJpZ2dlckFyZWEuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICAvLyBmb2N1cyB0aGUgdHJlZSB2aWV3IGlmIHRoZSBhbmltYXRpb24gZmluaXNoZWRcbiAgICBpZihoYXNGaW5pc2hlZCkgZm9jdXNUcmVlVmlldygpO1xuICAgIHJldHVybiBoYXNGaW5pc2hlZDtcbiAgfSk7XG59XG5cbi8vIGhpZGVzIHRoZSB0cmVlIHZpZXdcbmV4cG9ydCBmdW5jdGlvbiBoaWRlVHJlZVZpZXcoZGVsYXkgPSAwKSB7XG4gIHZpc2libGUgPSBmYWxzZTtcbiAgZXZlbnRUcmlnZ2VyQXJlYS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJyc7XG4gIHJldHVybiBhbmltYXRlKGNvbmZpZy5taW5XaWR0aCwgZGVsYXkpLnRoZW4oaGFzRmluaXNoZWQgPT4ge1xuICAgIGlmKGhhc0ZpbmlzaGVkKSB7XG4gICAgICAvLyBmb2N1cyB0aGUgZWxlbWVudCB0aGF0IGhhZCBmb2N1cyB3aGVuIHNob3coKSB3YXMgdHJpZ2dlcmVkXG4gICAgICByZXN0b3JlRm9jdXMoKTtcbiAgICAgIC8vIGFnYWluIGJlY2F1c2Ugc29tZXRpbWVzIGEgc2hvdygpIGVuZHMgYWZ0ZXIgYSBoaWRlKCkgc3RhcnRzXG4gICAgICBldmVudFRyaWdnZXJBcmVhLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnJztcbiAgICB9XG4gICAgcmV0dXJuIGhhc0ZpbmlzaGVkO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVHJlZVZpZXdWaXNpYmxlKCkge1xuICByZXR1cm4gdmlzaWJsZTtcbn1cblxuLy8gdG9nZ2xlcyB0aGUgdHJlZSB2aWV3XG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlVHJlZVZpZXcoZGVsYXkgPSAwKSB7XG4gIHJldHVybiB2aXNpYmxlID8gaGlkZVRyZWVWaWV3KGRlbGF5KSA6IHNob3dUcmVlVmlldyhkZWxheSk7XG59XG5cbi8vIHJlc2l6ZXMgdGhlIHRyZWUgdmlldyB0byBmaXQgdGhlIGNvbnRlbnRcbmV4cG9ydCBmdW5jdGlvbiByZXNpemVUcmVlVmlldygpIHtcbiAgcmV0dXJuIHZpc2libGUgPyBzaG93VHJlZVZpZXcoMCwgZmFsc2UpIDogaGlkZVRyZWVWaWV3KCk7XG59XG5cbnZhciBjdXJyZW50QW5pbWF0aW9uID0gbnVsbDtcblxuLy8gdGhlIGFuaW1hdGlvbiBmdW5jdGlvbiByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggJ3RydWUnXG4vLyBpZiB0aGUgYW5pbWF0aW9uIGZpbmlzaGVkLCBvciB3aXRoICdmYWxzZScgaWYgaXQgd2FzIGNhbmNlbGxlZFxuZnVuY3Rpb24gYW5pbWF0ZSh0YXJnZXRXaWR0aCwgZGVsYXksIGVsZW1lbnQgPSB0cmVlVmlld0VsKSB7XG4gIHZhciBpbml0aWFsV2lkdGggPSBlbGVtZW50LmNsaWVudFdpZHRoO1xuICAvLyBkdXJhdGlvbiA9IDAgaWYgYW5pbWF0aW9uU3BlZWQgPT0gMFxuICB2YXIgYW5pbWF0aW9uU3BlZWQgPSBjb25maWcuYW5pbWF0aW9uU3BlZWQgfHwgSW5maW5pdHk7XG4gIHZhciBkdXJhdGlvbiA9IE1hdGguYWJzKHRhcmdldFdpZHRoIC0gaW5pdGlhbFdpZHRoKSAvIGFuaW1hdGlvblNwZWVkO1xuICAvLyBjYW5jZWwgYW55IGN1cnJlbnQgYW5pbWF0aW9uIGFuZFxuICAvLyBpbW1lZGlhdGVseSB0cmlnZ2VyIHRoaXMgYW5pbWF0aW9uXG4gIGlmKGN1cnJlbnRBbmltYXRpb24gJiYgY3VycmVudEFuaW1hdGlvbi5wbGF5U3RhdGUgIT0gJ2ZpbmlzaGVkJykge1xuICAgIGN1cnJlbnRBbmltYXRpb24uY2FuY2VsKCk7XG4gICAgZGVsYXkgPSAwO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIC8vIGNhY2hlIHRoZSBjdXJyZW50IGFuaW1hdGlvblBsYXllciBzbyB3ZSBjYW5cbiAgICAvLyBjYW5jZWwgaXQgYXMgc29vbiBhcyBhbm90aGVyIGFuaW1hdGlvbiBiZWdpbnNcbiAgICB2YXIgYW5pbWF0aW9uID0gY3VycmVudEFuaW1hdGlvbiA9IGVsZW1lbnQuYW5pbWF0ZShbXG4gICAgICB7d2lkdGg6IGluaXRpYWxXaWR0aH0sXG4gICAgICB7d2lkdGg6IHRhcmdldFdpZHRofSxcbiAgICBdLCB7ZHVyYXRpb24sIGRlbGF5fSk7XG5cbiAgICBhbmltYXRpb24uYWRkRXZlbnRMaXN0ZW5lcignZmluaXNoJywgZnVuY3Rpb24gb25maW5pc2goKSB7XG4gICAgICBhbmltYXRpb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuICAgICAgLy8gaWYgY2FuY2VsbGVkLCByZXNvbHZlIHdpdGggZmFsc2VcbiAgICAgIGlmKGFuaW1hdGlvbi5wbGF5U3RhdGUgIT0gJ2ZpbmlzaGVkJylcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpO1xuXG4gICAgICAvLyBwcmV2ZW50IHRyZWUgdmlldyBmcm9tIHJlc2V0dGluZyBpdHMgd2lkdGggdG8gaW5pdGlhbFdpZHRoXG4gICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gYCR7dGFyZ2V0V2lkdGh9cHhgO1xuICAgICAgY3VycmVudEFuaW1hdGlvbiA9IG51bGw7XG4gICAgICByZXNvbHZlKHRydWUpO1xuICAgIH0pO1xuICB9KS5jYXRjaChsb2dFcnJvcik7XG59XG5cbi8vIGZ1bmN0aW9ucyB0aGF0IGRlYWwgd2l0aCBmb2N1c2luZyB0aGUgcmlnaHRcbi8vIGVsZW1lbnQgYXQgdGhlIHJpZ2h0IHRpbWVcblxudmFyIGZvY3VzZWRFbGVtZW50O1xuXG4vLyBjYWNoZSB0aGUgZWxlbWVudCB0aGF0IGN1cnJlbnRseSBoYXMgZm9jdXNcbmV4cG9ydCBmdW5jdGlvbiBzdG9yZUZvY3VzZWRFbGVtZW50KGVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkge1xuICBpZighaXNDaGlsZE9mKGVsLCB0cmVlVmlld0VsLnBhcmVudE5vZGUpKVxuICAgIGZvY3VzZWRFbGVtZW50ID0gZWw7XG59XG5cbi8vIGNsZWFyIHRoZSByZWZlcmVuY2UgdG8gdGhlIGZvY3VzZWRFbGVtZW50LiB1c2VmdWxcbi8vIHdoZW4gd2Ugd2FudCB0byBpbnZhbGlkYXRlIHRoZSBuZXh0IHJlc3RvcmVGb2N1c1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyRm9jdXNlZEVsZW1lbnQoKSB7XG4gIGZvY3VzZWRFbGVtZW50ID0gbnVsbDtcbn1cblxuLy8gcmVzdG9yZXMgZm9jdXMgb24gZm9jdXNlZEVsZW1lbnRcbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlRm9jdXMoKSB7XG4gIC8vIG9ubHkgcmVzdG9yZSBmb2N1cyBpZiB0cmVlIHZpZXcgaGFzIGZvY3VzXG4gIGlmKCFmb2N1c2VkRWxlbWVudCB8fCAhaXNDaGlsZE9mKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsIHRyZWVWaWV3RWwpKVxuICAgIHJldHVybjtcbiAgaWYodHlwZW9mIGZvY3VzZWRFbGVtZW50LmZvY3VzID09ICdmdW5jdGlvbicpXG4gICAgZm9jdXNlZEVsZW1lbnQuZm9jdXMoKTtcbiAgY2xlYXJGb2N1c2VkRWxlbWVudCgpO1xufVxuXG4vLyBmb2N1cyB0aGUgdHJlZSB2aWV3IHdpdGggc29tZSBsb2dpYyBhcm91bmQgaXQgdG8gY2FuY2VsXG5leHBvcnQgZnVuY3Rpb24gZm9jdXNUcmVlVmlldygpIHtcbiAgLy8gZG9uJ3QgZm9jdXMgaWYgYSBtb2RhbCBwYW5lbCBoYXMgZm9jdXNcbiAgLy8gYmVjYXVzZSB0aGV5IHRlbmQgdG8gY2xvc2Ugd2hlbiB0aGV5IGxvc2UgZm9jdXNcbiAgaWYoaXNDaGlsZE9mKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICdhdG9tLXBhbmVsLm1vZGFsJykpXG4gICAgcmV0dXJuO1xuXG4gIHRyZWVWaWV3LmZvY3VzKCk7XG59XG4iXX0=
//# sourceURL=/Users/marcoslamuria/.atom/packages/autohide-tree-view/lib/autohide-tree-view.js
